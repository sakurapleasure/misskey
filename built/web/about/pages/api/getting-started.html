<!DOCTYPE html><html lang="ja" dir="ltr"><head><meta charset="utf-8"><meta name="application-name" content="Misskey"><meta name="theme-color" content="#87bb35"><meta name="referrer" content="origin"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><link rel="stylesheet" href="/assets/style.css"><title>Getting Started | About Misskey</title></head><body><nav><ul><li><a href="/link-to-twitter">Twitterと連携する</a></li><li><p>API</p><ul><li><a href="/api/getting-started">Getting Started</a></li><li><p>Entities</p><ul><li><a href="/api/entities/post">Post</a></li><li><a href="/api/entities/user">User</a></li></ul></li><li><a href="/api/library">ライブラリ</a></li></ul></li><li><a href="/tou">利用規約</a></li><li><a href="/privacy">プライバシー</a></li><li><a href="/license">ライセンス</a></li></ul></nav><main><article><h1>Getting Started</h1><p>MisskeyはREST APIやStreaming APIを提供しており、プログラムからMisskeyの全ての機能を利用することができます。</p><p>それらのAPIを利用するには、まずAPIを利用したいアカウントのアクセストークンを取得する必要があります:</p><section><h2>自分のアクセストークンを取得したい場合</h2><p>自分自身のアクセストークンは、設定 > API で確認できます。</p><p class="tip">アカウントを乗っ取られてしまう可能性があるため、トークンは第三者に教えないでください(アプリなどにも入力しないでください)。<br>万が一トークンが漏れたりその可能性がある場合は トークンを再生成できます。(副作用として、ログインしているすべてのデバイスでログアウトが発生します)</p></section><section><h2>他人のアクセストークンを取得する</h2><p>不特定多数のユーザーからAPIを利用したい場合、アプリケーションを作成します。<br>アプリケーションを作成すると、ユーザーが連携を許可した時に、そのユーザーのアクセストークンを取得することができます。</p><p>アプリケーションを作成しアクセストークンを取得するまでの流れを見ていきます。</p><section><h3>アプリケーションを作成する</h3><p>まずはあなたのアプリケーションを作成しましょう。</p><p><a href= target="_blank">デベロッパーセンター</a>にアクセスし、アプリ > アプリ作成 に進みます。<br>次に、フォームに必要事項を記入します:</p><dl><dt>アプリケーション名</dt><dd>あなたのアプリケーションの名前。</dd><dt>Named ID</dt><dd>アプリを識別する/a-z-/で構成されたID。</dd><dt>アプリの概要</dt><dd>アプリの簡単な説明を入力してください。</dd><dt>コールバックURL</dt><dd>あなたのアプリケーションがWebアプリケーションである場合、ユーザーが後述するフォームで認証を終えた際にリダイレクトするURLを設定できます。</dd><dt>権限</dt><dd>アプリケーションが要求する権限。ここで要求した機能だけがAPIからアクセスできます。</dd></dl><p class="tip">権限はアプリ作成後も変更できますが、新たな権限を付与する場合、その時点で関連付けられているユーザーはすべて無効になります。</p><p>アプリケーションを作成すると、作ったアプリの管理ページに進みます。<br>アプリのシークレットキー(App Secret)が表示されていますので、メモしておいてください。</p><p class="tip">アプリに成りすまされる可能性があるため、極力このシークレットキーは公開しないようにしてください。</p></section><section><h3>ユーザーに認証させる</h3><p>あなたのアプリを使ってもらうには、ユーザーにアカウントへアクセスすることを許可してもらい、Misskeyにそのユーザーのアクセストークンを発行してもらう必要があります。</p><p>認証セッションを開始するには、<code>/auth/session/generate</code>へパラメータに<code>app_secret</code>としてApp Secretを含めたリクエストを送信します。</p><p>そうすると、レスポンスとして認証セッションのトークンや認証フォームのURLが取得できます。<br>この認証フォームのURLをブラウザで表示し、ユーザーにフォームを表示してください。</p><section><h4>あなたのアプリがコールバックURLを設定している場合</h4><p>ユーザーがアプリの連携を許可すると設定しているコールバックURLに<code>token</code>という名前でセッションのトークンが含まれたクエリを付けてリダイレクトします。</p></section><section><h4>あなたのアプリがコールバックURLを設定していない場合</h4><p>ユーザーがアプリの連携を許可したことを(何らかの方法で(たとえばボタンを押させるなど))確認出来るようにしてください。</p></section><p>次に、<code>/auth/session/userkey</code>へ<code>app_secret</code>としてApp Secretを、<code>token</code>としてセッションのトークンをパラメータとして付与したリクエストを送信してください。<br>上手くいけば、認証したユーザーのアクセストークンがレスポンスとして取得できます。おめでとうございます！</p><p>以降アクセストークンは、<strong>ユーザーのアクセストークン+アプリのシークレットキーをsha256したもの</strong>として扱います。</p></section></section><p>アクセストークンを取得できたら、あとは簡単です。REST APIなら、リクエストにアクセストークンを<code>i</code>としてパラメータに含めるだけです。</p><section><h2>リクエスト形式</h2><p><code>application/json</code>を受け付けます。</p><p class="tip">現在<code>application/x-www-form-urlencoded</code>も受け付けていますが、将来的にこのサポートはされなくなる予定です。</p></section></article><footer><p class="contribution">間違いを見つけた、またはドキュメントに貢献したいですか？<a href="https://github.com/syuilo/misskey/blob/master/docs/api/getting-started.pug" target="_blank">Github 上でこのページを編集する</a> か、<a href="https://github.com/syuilo/misskey/fork" target="_blank">Github からこのサイトを Fork してプルリクエストしましょう！</a></p><p class="copyright">(c) syuilo 2017</p></footer></main></body></html>